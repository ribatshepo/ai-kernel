# AI Kernel Platform - Environment Configuration
# Copy this file to .env and update with your actual values
# IMPORTANT: Never commit .env to git! It's in .gitignore

# ==============================================================================
# EXTERNAL SERVICES CONFIGURATION (Bare-Metal Servers)
# ==============================================================================

# Harbor Container Registry (Bare-Metal)
HARBOR_URL=https://harbor.aikernel.local
HARBOR_REGISTRY=harbor.aikernel.local
HARBOR_PROJECT=aikernel
HARBOR_USERNAME=robot$github-actions
HARBOR_PASSWORD=CHANGE_ME_HARBOR_PASSWORD
HARBOR_ADMIN_PASSWORD=CHANGE_ME_HARBOR_ADMIN_PASSWORD

# JFrog Artifactory (Bare-Metal)
ARTIFACTORY_URL=https://artifactory.aikernel.local
ARTIFACTORY_USERNAME=github-actions
ARTIFACTORY_PASSWORD=CHANGE_ME_ARTIFACTORY_PASSWORD
ARTIFACTORY_HELM_REPO=helm-local
ARTIFACTORY_DOCKER_REPO=docker-local
ARTIFACTORY_NUGET_REPO=nuget-local
ARTIFACTORY_NPM_REPO=npm-local
ARTIFACTORY_GENERIC_REPO=generic-local

# MinIO S3 Storage (Bare-Metal)
MINIO_ENDPOINT=minio.aikernel.local:9000
MINIO_CONSOLE_ENDPOINT=minio.aikernel.local:9001
MINIO_ACCESS_KEY=harbor-service
MINIO_SECRET_KEY=CHANGE_ME_MINIO_SECRET_KEY
MINIO_BUCKET=harbor-registry
MINIO_REGION=us-east-1
MINIO_USE_SSL=true

# ==============================================================================
# BARE-METAL SERVER ADDRESSES
# ==============================================================================

# Server IPs or Hostnames
HARBOR_SERVER_IP=192.168.1.10
ARTIFACTORY_SERVER_IP=192.168.1.11
MINIO_SERVER_IP=192.168.1.12

# SSH Access
HARBOR_SERVER_HOST=harbor-server
ARTIFACTORY_SERVER_HOST=artifactory-server
MINIO_SERVER_HOST=minio-server
SSH_USER=admin
SSH_KEY_PATH=~/.ssh/id_rsa

# ==============================================================================
# KUBERNETES CONFIGURATION
# ==============================================================================

# Kubernetes Cluster
KUBE_CONTEXT=kubernetes-admin@kubernetes
KUBE_NAMESPACE=aikernel-core

# Kubernetes Cluster Environments
KUBECONFIG_DEV=~/.kube/config-dev
KUBECONFIG_STAGING=~/.kube/config-staging
KUBECONFIG_PROD=~/.kube/config-prod

# ==============================================================================
# ARGOCD CONFIGURATION
# ==============================================================================

ARGOCD_SERVER=argocd.aikernel.local
ARGOCD_SERVER_PORT=443
ARGOCD_USERNAME=admin
ARGOCD_PASSWORD=CHANGE_ME_ARGOCD_PASSWORD
ARGOCD_TOKEN=CHANGE_ME_ARGOCD_TOKEN

# ==============================================================================
# IMAGE SIGNING (Cosign)
# ==============================================================================

# Cosign Key Paths
COSIGN_PRIVATE_KEY_PATH=./cosign.key
COSIGN_PUBLIC_KEY_PATH=./cosign.pub
COSIGN_PASSWORD=CHANGE_ME_COSIGN_PASSWORD

# ==============================================================================
# CI/CD CONFIGURATION
# ==============================================================================

# GitHub Configuration
GITHUB_REPOSITORY=your-org/ai-kernel
GITHUB_TOKEN=CHANGE_ME_GITHUB_TOKEN
GITHUB_ACTOR=github-actions

# CI/CD Registry (defaults to Harbor)
CI_REGISTRY=${HARBOR_REGISTRY}
CI_REGISTRY_USER=${HARBOR_USERNAME}
CI_REGISTRY_PASSWORD=${HARBOR_PASSWORD}

# ==============================================================================
# DATABASE CONFIGURATION
# ==============================================================================

# PostgreSQL
POSTGRES_HOST=postgres-primary.aikernel-data
POSTGRES_PORT=5432
POSTGRES_DB=aikernel_catalog
POSTGRES_USER=aikernel
POSTGRES_PASSWORD=CHANGE_ME_POSTGRES_PASSWORD

# Neo4j
NEO4J_HOST=neo4j.aikernel-data
NEO4J_PORT=7687
NEO4J_USERNAME=neo4j
NEO4J_PASSWORD=CHANGE_ME_NEO4J_PASSWORD

# Redis
REDIS_HOST=redis-master.aikernel-data
REDIS_PORT=6379
REDIS_PASSWORD=CHANGE_ME_REDIS_PASSWORD

# Elasticsearch
ELASTICSEARCH_HOST=elasticsearch.aikernel-data
ELASTICSEARCH_PORT=9200
ELASTICSEARCH_USERNAME=elastic
ELASTICSEARCH_PASSWORD=CHANGE_ME_ELASTICSEARCH_PASSWORD

# ==============================================================================
# MONITORING CONFIGURATION
# ==============================================================================

# Prometheus
PROMETHEUS_URL=http://prometheus.aikernel-monitoring:9090
PROMETHEUS_USERNAME=admin
PROMETHEUS_PASSWORD=CHANGE_ME_PROMETHEUS_PASSWORD

# Grafana
GRAFANA_URL=http://grafana.aikernel-monitoring:3000
GRAFANA_USERNAME=admin
GRAFANA_PASSWORD=CHANGE_ME_GRAFANA_PASSWORD

# Jaeger
JAEGER_URL=http://jaeger-query.aikernel-monitoring:16686

# ==============================================================================
# SERVICE MESH (Istio)
# ==============================================================================

ISTIO_VERSION=1.20.0
ISTIO_NAMESPACE=istio-system
ISTIO_INGRESS_GATEWAY=istio-ingressgateway.istio-system

# ==============================================================================
# VAULT CONFIGURATION
# ==============================================================================

VAULT_ADDR=http://vault.aikernel-security:8200
VAULT_TOKEN=CHANGE_ME_VAULT_TOKEN
VAULT_NAMESPACE=aikernel

# ==============================================================================
# APPLICATION CONFIGURATION
# ==============================================================================

# Environment
ENVIRONMENT=development
NODE_ENV=development
DOTNET_ENVIRONMENT=Development

# Logging
LOG_LEVEL=info
LOG_FORMAT=json

# API Configuration
API_BASE_URL=https://api.aikernel.local
API_PORT=8080
API_TIMEOUT=30s

# ==============================================================================
# NETWORKING
# ==============================================================================

# DNS Configuration
CLUSTER_DOMAIN=cluster.local
SERVICE_DOMAIN=aikernel.local

# Ingress
INGRESS_CLASS=nginx
INGRESS_CONTROLLER=ingress-nginx

# TLS/SSL
TLS_ENABLED=true
TLS_CERT_PATH=/etc/ssl/certs
TLS_KEY_PATH=/etc/ssl/private

# ==============================================================================
# BACKUP CONFIGURATION
# ==============================================================================

# Backup Settings
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 1 * * *
BACKUP_RETENTION_DAYS=7
BACKUP_DESTINATION=/backup

# MinIO Backup
MINIO_BACKUP_BUCKET=backups
MINIO_BACKUP_PATH=/backup/minio

# Database Backup
DB_BACKUP_PATH=/backup/databases
DB_BACKUP_COMPRESSION=gzip

# ==============================================================================
# RESOURCE LIMITS
# ==============================================================================

# Default Resource Requests
DEFAULT_CPU_REQUEST=500m
DEFAULT_MEMORY_REQUEST=512Mi

# Default Resource Limits
DEFAULT_CPU_LIMIT=2000m
DEFAULT_MEMORY_LIMIT=2Gi

# ==============================================================================
# SECURITY CONFIGURATION
# ==============================================================================

# Image Scanning
TRIVY_SCAN_ON_PUSH=true
TRIVY_SEVERITY_THRESHOLD=HIGH,CRITICAL
TRIVY_IGNORE_UNFIXED=false

# Image Signing
IMAGE_SIGNING_ENABLED=true
IMAGE_SIGNING_REQUIRED_FOR_PROD=true

# Network Policies
NETWORK_POLICIES_ENABLED=true
MTLS_ENABLED=true

# ==============================================================================
# FEATURE FLAGS
# ==============================================================================

# Deployment Features
SKIP_ISTIO=false
SKIP_ARGOCD=false
SKIP_DASHBOARD=false
DRY_RUN=false

# External Services (always true for bare-metal)
USE_EXTERNAL_HARBOR=true
USE_EXTERNAL_ARTIFACTORY=true
USE_EXTERNAL_MINIO=true

# ==============================================================================
# OPTIONAL INTEGRATIONS
# ==============================================================================

# Slack Notifications
SLACK_WEBHOOK_URL=
SLACK_CHANNEL=#deployments

# Email Notifications
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_FROM=noreply@aikernel.local

# ==============================================================================
# DEVELOPMENT SETTINGS
# ==============================================================================

# Debug Mode
DEBUG=false
VERBOSE=false

# Local Development
LOCAL_DEV_MODE=false
SKIP_TLS_VERIFY=false

# ==============================================================================
# NOTES
# ==============================================================================

# 1. Copy this file to .env: cp .env.example .env
# 2. Update all CHANGE_ME_* values with actual credentials
# 3. Ensure .env is in .gitignore (it should be by default)
# 4. Never commit credentials to version control
# 5. Rotate credentials regularly (quarterly recommended)
# 6. Use strong passwords (min 32 characters for secrets)
# 7. For production, use a proper secrets management system (Vault, etc.)

# ==============================================================================
# GENERATION COMMANDS
# ==============================================================================

# Generate strong passwords:
# openssl rand -base64 32

# Generate secure tokens:
# openssl rand -hex 32

# Generate Cosign keys:
# cosign generate-key-pair

# Base64 encode kubeconfig:
# cat ~/.kube/config | base64 -w 0

# Create MinIO credentials:
# mc admin user add local <username> $(openssl rand -base64 32)

# ==============================================================================
# VALIDATION
# ==============================================================================

# Validate this configuration:
# ./scripts/validate-env.sh

# Load and test configuration:
# source .env && ./scripts/test-connections.sh
